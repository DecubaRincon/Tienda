<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>Formulario en Modal - Bootstrap 5</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.10/css/intlTelInput.css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700" rel="stylesheet">
</head>

<body>

  <!-- Botón para abrir el modal -->
  <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
    Abrir Formulario
  </button>

  <!-- Modal -->
  <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Ingrese sus datos y nos comunicaremos con usted</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form id="contactForm">

            <!-- Campos del formulario -->
            <div class="mb-3">
              <label for="nombre" class="form-label">Nombre</label>
              <input type="text" class="form-control" id="nombre" name="nombre" required>
            </div>

            <div class="mb-3">
              <label for="telefono" class="form-label">Teléfono</label>
              <input type="tel" class="form-control iti" id="telefono" name="telefono" placeholder="Inserte el Teléfono:" required>
            </div>

            <div class="mb-3">
              <label for="correo" class="form-label">Correo</label>
              <input type="email" class="form-control" id="correo" name="correo" required>
            </div>

            <div class="mb-3">
              <label for="nombre-envia" class="form-label">Nombre de a quien envía</label>
              <input type="text" class="form-control" id="nombre-envia" name="nombre-envia" required>
            </div>

            <div class="mb-3">
              <label for="telefono-envia" class="form-label">Teléfono de a quien envía</label>
              <input type="tel" class="form-control iti" id="telefono-envia" name="telefono-envia" required>
            </div>

            <div class="mb-3">
              <label for="nombre-calle" class="form-label">Dirección a donde envía - Nombre de la calle</label>
              <input type="text" class="form-control" id="nombre-calle" name="nombre-calle" required>
            </div>

            <div class="mb-3">
              <label for="entre-calles" class="form-label">Dirección a donde envía - Entre calles</label>
              <input type="text" class="form-control" id="entre-calles" name="entre-calles" required>
            </div>

            <div class="mb-3">
              <label for="numero-casa" class="form-label">Dirección a donde envía - Número de la casa</label>
              <input type="text" class="form-control" id="numero-casa" name="numero-casa">
            </div>

            <input type="hidden" name="_template" value="box">

            <input type="text" class="form-control" id="producto" name="producto" value="Refresco Gaseado de 1.5 Litros" readonly>

            <input type="text" class="form-control" id="precio" name="precio" value="$2.50usd" readonly>

            <button type="submit" class="btn btn-primary">Enviar</button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.10/js/intlTelInput.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.10/js/utils.js"></script>
  <script>
    var input = document.querySelector("#telefono");
    var inputEnvia = document.querySelector("#telefono-envia");

    var iti = window.intlTelInput(input, {
      preferredCountries: ["us", "ca", "mx"],
      utilsScript: "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.10/js/utils.js"
    });

    var itiEnvia = window.intlTelInput(inputEnvia, {
      preferredCountries: ["cu", "ca", "mx"],
      utilsScript: "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.10/js/utils.js"
    });

    document.getElementById('contactForm').addEventListener('submit', function(event) {
      event.preventDefault();
      var form = this;
      document.getElementById('contactForm').addEventListener('submit', function(event) {
    event.preventDefault();
    
    var formData = new FormData(this);
    
    fetch('URL_DEL_ENDPOINT', {
      method: 'POST',
      body: formData
    })
    .then(response => {
      if (response.ok) {
        // Aquí puedes realizar acciones si la respuesta es exitosa
        console.log('Datos enviados correctamente');
        // Por ejemplo, cerrar el modal si estás usando uno
        $('#exampleModal').modal('hide'); // Cerrar el modal
      } else {
        throw new Error('Error al enviar los datos');
      }
    })
    .catch(error => {
      console.error('Error:', error);
      // Aquí puedes manejar el error, mostrar un mensaje al usuario, etc.
    });
  });
      $('#exampleModal').modal('hide'); // Cerrar el modal
    });
  </script>
</body>

</html>
